<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>flickr cc attribution helper</title>
		<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
		<!--[if lt IE 9]><script type='text/javascript' src='assets/javascript/html5.js'></script><![endif]-->
		<script type='text/javascript' src='assets/javascript/prettify.js'></script>
		<script type='text/javascript' src='assets/javascript/jquery-1.7.1.min.js'></script>
		
		<script type="text/javascript">
    
    	// SETUP
        // default size for image used in HTML '_m'=240px, ''=500px, '_c'=800px, '_b' = 1024px
		var ps = '';
		
		// default URL for hosted tool
		var fu = 'http://cogdog.github.io/cc-attributor.html';

		$(document).ready(function(){	
			// set default value of form fields
			$('#furl').val(fu);	
			$('#isize').val(ps);
			
			// call function to set value of text area and bookmarklet link
			makebookmarklet();				
			
			$('#furl').change(function() {
				 makebookmarklet()
			});
			
			$('#isize').change(function() {
				 makebookmarklet()
			});
			
			// this function will update the bookmarklet based on the value of the image size and url field values
			function makebookmarklet() {			
				if ( $('#isize').val() != '') {
					sizestr = "+'&s=" + $('#isize').val() + "'";
				} else {
					sizestr = '';
				}
				
				// Here is the magic code
				str = "javascript:fu=document.URL.split(\"/\")[5];helperURL='" + $('#furl').val() + "';fw=window.open(helperURL+'?flickd='+fu" + sizestr +", 'cc-helper', 'resizable=0,scrollbars=0,width=560,height=360'); setTimeout(function(){fw.focus();},1000);";
				
				// insert into textarea
				$('#marklet').val(str);
				
				// make it thelink for drag action form hyperlink
				$("a#mlink").attr('href', str);
			}

		});
    </script>

		<link rel='stylesheet' type='text/css' href='assets/css/style.css' />
		<link rel='stylesheet' type='text/css' href='assets/css/bootstrap.css' />
		<link rel='stylesheet' type='text/css' href='assets/css/prettify.css' />
		
		<style type='text/css'>
		label, input, textarea {display:block;}
		label {margin:1em, 0, 0; font-weight:900; }
		input, textarea {width: 500px;}
   		</style>

	</head>
	<body onload='prettyPrint()'>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand" href="#">flickr cc attribution helper</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li class="active"><a href="#home">Home</a></li>
            <li><a href="#why">Why</a></li>
            <li><a href="#maker">Bookmarklet Maker</a></li>
          </ul>
        </div><!-- /.nav-collapse -->
      </div>
    </div><!-- /navbar-inner -->
</div>
		
  <div class='row-fluid'>
  		<div class='hero-unit' id="home">
			<header>
				<h1 class=''>flickr cc attribution helper</h1>
			</header>
			<p>Turns the laborious task of giving attribution of creative commons flickr photos into a one click operation.</p>
         <p><img width="450" height="392" alt="flickr-cc.-logo" src="images/flickr-cc-helper.png"></p>
          		
			<h2 id="why">Why</h2>
			<p>It's a bag of gold-- <a href="http://flickr.com/creativecommons">collection of creative commons licensed photos on flickr</a>. Yet, to use said images to create a blog post requires no less than 12 clicks and 4 copy/paste operations. In 2009 I thought there should be an easier way, and created the <a href="http://userscripts.org/scripts/show/49395">first flickr cc attribution helper</a> as a Firefox Greasemonkey script.  The script detected if a given flickr photo was Create Commons licensed. If so, it inserted directly into the flickr page a cut and paste set of HTML that had everything to put into a blog post- the image code to display the photo, a link back to the original, and a display of the license, the photo owner, and links back.  It also provided a second text attribution string that could be used in documents or presentations.</p>
			
			<p><a href="http://cogdogblog.com/flickr-cc-helper/">Since then I modified this script</a> to work as a <a href="https://chrome.google.com/webstore/detail/flickr-cc-attribution-hel/gcnphdhkhoepofbahkgfifigellgklbp">Chrome extension</a>. I've used this on literally hundreds of blog posts primarily on <a href="http://cogdogblog.com/">CogDogBlog</a>.</p>
			
			<p>The pitfall of this approach was that it was completely dependent on knowing the structure of the flickr photo page, which has changed 3 times since 2009/ Each change requiring a re-write of the script. Flickr does not provide any standard meta data on the page to identify the creative commons license, so getting details called for a set of XPATH parsing and Javascript gymnastics.</p>
			
			<p>The <a href="http://cogdogblog.com/2014/03/26/new-flickr-trashes-creative-commons-attribution-helper/">update of the flickr site in March 2014 again rendered the script unfunctional</a>; and made it imposible to update because much of the information was not generated dynamically via complex scripts; the information could not be easily parsed.</p>
			
			<h2>The Way Forward</h2>
			<p>This new version takes a different approach; a person interested  in using the tool intalls a <a href="http://en.wikipedia.org/wiki/Bookmarklet">web browser bookmarklet</a>. Upon viewing a flickr photo, the bookmarklet spawns a window containing the one click copy attribution. </p>
			
			<img width="600" height="345" alt="cc-helper-shot" src="images/cc-helper-shot.jpg">
			
			
			<p>It's almost as good as before, and is not limited to browser brands.</p>
			
			<p>The work of the attribution helper is done via an HTML page boosted with some jQuery code. The bookmarklet passes the unique flickr id (it's in the URL), and the special page uses the <a href="https://www.flickr.com/services/api/response.json.html">flickr api vis JSON</a> to get all of the information needed to build and display an attribution string. </p>
			
			<h2>The Easy Way vs the Custom Way</p>
			<p>If you want to do basic attribution, you can use the bookmarklet generating tool below, and go off attributiing., It is powered bby the helper tool page residing in this github site.</p>
			
			<p>If you would like to customize the attribution output in any way, or just prefer to run your own,  you can <a href="https://github.com/cogdog/flickr-cc-helper">grab a copy of the attribtion helper on github</a>, fork and modify, and run on your own web server. It just needs to be available at a public web page. And you can still use the nookmarklet generator below to build your browser tool.
			<hr class="soften">
			
			<h2 id="maker">Bookmarklet Generator</h2>
			<p>Here is the place! Get your own tool here.</p>
			
		<form>
	  	<label for="isize"></label>
	  	
	  	<span class="label label-important">Width of flickr image to use for HTML  attribution</span><br />
	  	<select id="isize">
	  		<option value="_m">240px</option>
	  		<option value="">500px</option>
	  		<option value="_z">620px</option>
	  		<option value="_c">800px</option>
	  		<option value="_b">1024px</option>
	  	</select>
	  	
	  	<label for="furl"></label>
	  	Change only if you are using your own custom attribution helper page. You are more than welcome to use mine (thanks github!)<br />
	  	<span class="label label-important">location of attribution helper tool</span>
	  	<input type="text" id="furl" />
	  	
	  	<label for="furl"></label>
	  	
	  	
	  	<span class="label label-important">bookmarklet code</span>
	  	<textarea id="marklet" rows="5"></textarea>
	  	Drag link for <a href="#" id="mlink" class='btn btn-info'>flickr cc attribution helper</a> to your browser bar or copy code above if you like to make them by hand.
	  	</form>


        
	
		</div>	
<footer class="span12">
<div class="alert">
 a barking dog production &bull;<a href="http://cogdog.info/"> cogdog.info</a> &bull; <a href="http://cogdogblog.com">cogdogblog.com</a>
</div>
</footer>
			</div>

		
		<a href='https://github.com/cogdog/flickr-cc-helper' class='github-ribbon'><img src='assets/images/github-ribbons/white.png' /></a>
	</div>	
	</body>
</html>
